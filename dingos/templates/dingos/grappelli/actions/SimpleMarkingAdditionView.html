{% extends "dingos/grappelli/lists/base_lists_two_column.html" %}

{% comment %}
Copyright (c) Siemens AG, 2013

This file is part of MANTIS.  MANTIS is free software: you can
redistribute it and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either version 2
of the License, or(at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}




{% load dingos_tags %}

{# Below, we fill out the form that queries the search parameters #}


{% block content_frontmatter %}
<form action="{% url "url.dingos.action.add_marking" %}" method="POST">
    {% csrf_token %}
{% endblock %}

{% block list_title %} Selected Objects {% endblock %}



{% block right_column %}

<div class="grp-module">
    <h2>{% block tool_title %} Markings to be added {% endblock %}</h2>


  <div class="grp-module">   

    <table class="grp-full-width">
        <tbody>
                   <tr>
                       <th>{{form.marking_to_add.label_tag}}</th>
                    <td>{{form.marking_to_add.errors}} {{form.marking_to_add}}</td>
                   </tr>
                   {{form.checked_objects_choices}}

        </tbody>
    </table>
  </div>
    <input type="submit" name="execute_query" value="Add Marking" />
</div>


{% endblock %}

{# Below, fill out the #} 

{% block objects %}
    {% for checkbox in form.checked_objects %}
        {% with pk=checkbox.choice_label %}
        {% get_via_view_method "obj_by_pk" pk as obj %}
          {{ pk }}
          {{ obj.name }}
        {% endwith %}
    {% endfor %}
   <div class="grp-module grp-changelist-results">

    <table id="result_list" cellspacing="0" class="grp-sortable">
     <thead>
       <tr>

       </tr>
     </thead>

        <div id="id_checked_objects">
       <tbody>

       {% for obj in object_list %}

           <tr class="grp-row grp-row-{% cycle 'odd' 'even' %}">

               <td>
               <input id="id_checked_objects_{{ forloop.counter }}" checked='1' name="checked_objects" type="checkbox" value={{ obj.pk }} />
               </td>
               <td>
                   <a href="{%url 'url.dingos.view.infoobject' pk=obj.pk %}">{{ obj.identifier }}</a>
               </td>
               <td>
                   {{obj.name | insert_wbr }}
               </td>

           </tr>
       {% endfor %}
       </tbody>
     </div>
 </table>

</div>
{% endblock %}


{% block content_backmatter %}
</form>
{% endblock %}


