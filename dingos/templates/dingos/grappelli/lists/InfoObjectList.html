{% extends "dingos/grappelli/lists/base_lists_two_column.html" %}

{% comment %}
Copyright (c) Siemens AG, 2013

This file is part of MANTIS.  MANTIS is free software: you can
redistribute it and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation; either version 2
of the License, or(at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
details.

You should have received a copy of the GNU General Public License along with
this program; if not, write to the Free Software Foundation, Inc., 51
Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}

{% load dingos_tags %}

{% block extrahead %}
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script src="/static/admin/js/actions.js" type="text/javascript"></script>
<script charset="utf-8" type="text/javascript">
            (function($) {
                $(document).ready(function() {
                    $("tr input.action-select").actions();
                });
            })(grp.jQuery);
</script>
{% endblock %}

{% block objects %}

    {% if object_list %}
      <div class="grp-module grp-changelist-results">
        {% if list_actions %}<form id="action-form" method="post">{% csrf_token %}{% endif %}
        <table id="result_list" cellspacing="0" class="grp-sortable">

                {% block header_row %}
           	  <thead>
                    <tr>
                      {% if list_actions %}
                        <th scope="col" class="action-checkbox-column">
                            <div class="grp-text"><span><input id="action-toggle" type="checkbox"></span></div>
                        </th>
                      {% endif %}
                        <th scope="col"  class="sortable column-identifier">
			    {% render_table_ordering "identifier__uid" "Identifier" %}
                        </th>
                        <th scope="col"  class="sortable column-timestamp">
			    {% render_table_ordering "timestamp" "Timestamp" %}
                        </th>
                        <th scope="col"  class="sortable column-created">
                            {% render_table_ordering "create_timestamp" "Created" %}
                        </th>
                        <th scope="col"  class="sortable column-name">
			   {% render_table_ordering "name" "Name" %}
                        </th>
                        <th scope="col"  class="sortable column-objecttype">
                            {% render_table_ordering "iobject_type" "Object Type" %}
                        </th>
                        <th scope="col"  class="sortable column-family">
                            {% render_table_ordering "iobject_type__iobject_family" "Family" %}
                        </th>
                    </tr>
		  </thead>
                {% endblock %}


                {% block rows %}
                    <tbody>

                    {% for obj in object_list %}
                      <tr class="grp-row grp-row-{% cycle 'odd' 'even' %}">
                       {% if list_actions %}  
                        <td class="action-input">
                          <input class="action-select" name="_selected_action" value="{{obj.pk}}" type="checkbox">
                        </td>
                       {% endif %}
                        <td>
                            <a href="{%url 'url.dingos.view.infoobject' pk=obj.pk %}">{{ obj.identifier }}</a>
                        </td>
                        <td>
                            {{obj.timestamp | date:"Y-m-d H:i:s O"}}
                        </td>
                        <td>
                            {{obj.create_timestamp | date:"Y-m-d H:i:s O"}}
                        </td>
                        <td>
                            {{obj.name}}
                        </td>
                        <td>
                            {{obj.iobject_type.name}}
                        </td>
                        <td>
                            {{obj.iobject_family.name}}  {{obj.iobject_family_revision.name}}
                        </td>
                     </tr>
                    {% endfor %}
                  </tbody>
                {% endblock %}
            </table>
            {% if list_actions %}</form>{% endif %}
        </div>
  {%  endif %}

{% endblock %}
