{% extends "dingos/grappelli/edits/base_edits.html" %}

{% comment %}
    Copyright (c) Siemens AG, 2013

    This file is part of MANTIS.  MANTIS is free software: you can
    redistribute it and/or modify it under the terms of the GNU General Public
    License as published by the Free Software Foundation; either version 2
    of the License, or(at your option) any later version.

    This program is distributed in the hope that it will be useful, but WITHOUT
    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
    FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
    details.

    You should have received a copy of the GNU General Public License along with
    this program; if not, write to the Free Software Foundation, Inc., 51
    Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
{% endcomment %}


{% load dingos_tags %}

{% block content_title %}
    <h1>Edit OAuth Keys for user {{ user.username }}</h1>
{% endblock %}

{% block content %}
    <form id="saved-search-edit" action="" method="post">{% csrf_token %}
        <div class="grp-row">
            {{ newclientform.as_table }}
            <input type="submit" name="generate_new_client" value="Generate key pair" />
        </div>
        <br/>

        <div class="grp-group grp-tabular" id="iobject_type_set-group">
            <h2>Available searches</h2>
            <div class="grp-module grp-table">
                <div class="grp-module grp-thead">
                    <div class="grp-tr">
                        <div class="grp-th">OAuth Client</div>
                        <div class="grp-th">Client ID</div>
                        <div class="grp-th">Client Secret</div>
                        <div class="grp-th" style="text-align:right;">Actions</div>
                    </div>
                </div>
                {{ formset.management_form }}
                {% for form in formset %}
                    <div class="grp-module grp-tbody grp-dynamic-form has_original">
                        <div class="grp-tr">
                            <div class="grp-td">
                                {{form.client_name}}
                            </div>
                            <div class="grp-td">
                                {{form.client_id}}
                            </div>
                            <div class="grp-td">
                                {{form.client_secret}}
                            </div>
                            <div class="grp-td grp-tools-container">
                                <span class="position-input" style="display:none;">{{form.ORDER}}</span>
                                <ul class="grp-tools">
                                    <li>
                                        <a href="javascript://" title="Move item" class="grp-icon grp-drag-handler"></a>
                                    </li>
                                    <li class="grp-remove-handler-container">
                                        {{form.DELETE}}<a href="javascript://" title="Delete item" class="grp-icon grp-delete-handler"></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <footer class="grp-module grp-submit-row grp-fixed-footer">
            <header style="display:none">
                <h1>Submit Options</h1>
            </header>
            <ul>
                <li><input type="submit" name="update_clients" class="grp-button grp-default" value="Save"></li>
            </ul>
        </footer>
    </form>
{% endblock %}
